//By Wavechaser
//Patches for stock engines

@PART[ionEngine]:FOR[SRR]    //IX-6315 Ion engine
{
    @mass = 1.0     //Some of these can weight up to 10t while providing 0.1N of thrust
    
    @MODULE[ModuleEnginesFX]
    {
        @atmosphereCurve
        {
            @key = 0     3000
            @key = 1     200
            @key = 1.1   0.001
        }
    }
}


@PART[JetEngine]:FOR[SRR]    //J-33 Wheesley
{
	MODEL
	{
		model = Squad/Parts/Engine/jetEngines/turbineInside
		position = 0.0, 0.972875, 0.0
		scale = 0.8, 0.6, 0.8
		otation = 0, 0, 0
	}

    @mass = 2.0
    @emissiveConstant = 0.75
    @heatConductivity = 0.08
    
    @MODULE[ModuleEnginesFX]
    {
        @maxThrust = 150
        @fxOffset = 0, 0, 1
        
        @atmosphereCurve
        {
            @key = 0 8000
        }
        
        @velCurve
        {
        //This curve specifies thrust% to mach relationship. I hate these curves.
        //         Mach     	Thrust% 	Tangent In 	Tangent Out
			@key = 0        	0.9     	0       	0
			@key = 0.83     	1.0     	0       	0.5
			@key = 0.9      	0.7     	-8      	-7
			@key = 1.2      	0.1     	-0.45		0
			@key = 1.72     	0.05    	0       	0
        }
        
        @atmCurve
        {
        //This curve specifies thrust% to atm pressure relationship.
        //         Pres(atm)	Thrust%		Tangent In	Tangent Out
			@key = 0 			0 			0 			0.8
			@key = 0.177 		0.05		1.34 		1.34
			@key = 0.337 		0.4 		0.89 		0.89
			@key = 1 			1 			0.91		0
		}
    }
}


@PART[turboFanEngine]:FOR[SRR]
{
	MODEL
	{
		model = Squad/Parts/Engine/jetEngines/turbineInside
		position = 0.0, 1.4, 0.0
		scale = 0.95, 1.0, 0.95
	}
	
	!MODULE[ModuleEnginesFX]	{}
	
	MODULE
	{
		name = MultiModeEngine
		primaryEngineID = TurboJet
		secondaryEngineID = RamJet
	}
	
	MODULE
	{
		name = ModuleEnginesFX
		engineID = TurboJet
		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 130
		heatProduction = 75
		useEngineResponseTime = True
		engineAccelerationSpeed = 0.25
		engineDecelerationSpeed = 0.5
		useVelocityCurve = False
		
		flameoutEffectName = flameout
		powerEffectName = running_thrust
		runningEffectName = shockDiamond
		engageEffectName = engage
		disengageEffectName = disengage
		spoolEffectName = running_turbine
		engineSpoolIdle = 0.05
		engineSpoolTime = 2.0
		EngineType = Turbine
		
		PROPELLANT
		{
			name = LiquidFuel
			resourceFlowMode = STAGE_STACK_FLOW_BALANCE
			ratio = 1
			DrawGauge = True
		}
		
		PROPELLANT
		{
			name = IntakeAir
			ignoreForIsp = True
			ratio = 9
		}
		
		atmosphereCurve
		{
			key = 0 4000 0 0 
		}
		
		//Jet parameters
		atmChangeFlow = True
		useVelCurve = True
		useAtmCurve = True
		flowMultCap = 2.0
		machLimit = 2
		machHeatMult = 6.0
		
		velCurve
		{
			key = 0 1.1 0 0.1
			key = 0.2 1 0 -0.4
			key = 0.7 1.3 1.5 2
			key = 1 2 2.9 3.2
			key = 1.3 2.4 0 0.6
			key = 2.3 1.2 -2 -2
			key = 3.3 0 0 0
		}
		
		atmCurve
		{
			key = 0 0 0 0
			key = 0.045 0.166 4.304647 4.304647
			key = 0.16 0.5 0.5779132 0.5779132
			key = 0.5 0.6 0.4809403 0.4809403
			key = 1 1 1.013946 0
		}
	}
}
